<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GREEN FARMER</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #14532d;
  color: #ecfdf5;
  font-family: Arial;
  text-align: center;
}
canvas {
  background: linear-gradient(#4ade80, #166534);
  display: block;
  margin: auto;
  border: 3px solid #064e3b;
}
.hud {
  display: flex;
  justify-content: space-around;
  padding: 8px;
  background: #064e3b;
}
button {
  padding: 12px 18px;
  margin: 6px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  background: #22c55e;
  font-weight: bold;
}
.controls {
  display: flex;
  justify-content: center;
}
</style>
</head>

<body>

<h2>üå± GREEN FARMER</h2>

<div class="hud">
  <div>‚ù§Ô∏è <span id="life">3</span></div>
  <div>‚ö° <span id="energy">100</span></div>
  <div>üåΩ <span id="score">0</span></div>
  <div>üèÜ <span id="level">1</span></div>
</div>

<canvas id="game" width="360" height="520"></canvas>

<div class="controls">
  <button onclick="moveLeft()">‚¨ÖÔ∏è</button>
  <button onclick="harvest()">üåæ</button>
  <button onclick="moveRight()">‚û°Ô∏è</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let life = 3, energy = 100, score = 0, level = 1;
let gameOver = false;

const farmer = {
  x: 160,
  y: 460,
  width: 40,
  height: 40,
  speed: 6
};

const items = [];

const itemTypes = [
  { type: "crop", color: "#22c55e", score: 3 },
  { type: "seed", color: "#fde047", score: 1 },
  { type: "weed", color: "#166534", score: -2 },
  { type: "bug", color: "#dc2626", damage: 1 },
  { type: "gold", color: "#facc15", score: 6 }
];

document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") moveLeft();
  if (e.key === "ArrowRight") moveRight();
  if (e.key === " ") harvest();
});

function moveLeft() {
  farmer.x -= farmer.speed;
  if (farmer.x < 0) farmer.x = 0;
}

function moveRight() {
  farmer.x += farmer.speed;
  if (farmer.x + farmer.width > canvas.width)
    farmer.x = canvas.width - farmer.width;
}

function spawnItem() {
  const t = itemTypes[Math.floor(Math.random() * itemTypes.length)];
  items.push({
    ...t,
    x: Math.random() * (canvas.width - 40),
    y: -30,
    size: 30
  });
}

function drawFarmer() {
  ctx.fillStyle = "#fbbf24";
  ctx.fillRect(farmer.x, farmer.y, farmer.width, farmer.height);
}

function drawItem(i) {
  ctx.fillStyle = i.color;
  ctx.beginPath();
  ctx.arc(i.x + i.size/2, i.y + i.size/2, i.size/2, 0, Math.PI*2);
  ctx.fill();
}

function harvest() {
  if (energy <= 0 || gameOver) return;
  energy -= 6;

  items.forEach(i => {
    const hit =
      i.x < farmer.x + farmer.width &&
      i.x + i.size > farmer.x &&
      i.y + i.size > farmer.y &&
      i.y < farmer.y + farmer.height;

    if (hit) {
      if (i.damage) life -= i.damage;
      else score += i.score || 0;
      i.dead = true;
    }
  });

  if (score < 0) score = 0;
  if (score >= level * 10) level++;
}

function update() {
  if (gameOver) return;

  ctx.clearRect(0,0,canvas.width,canvas.height);

  items.forEach(i => {
    i.y += 1.5 + level * 0.4;
    drawItem(i);

    if (i.y > canvas.height) {
      if (i.type !== "weed") life--;
      i.dead = true;
    }
  });

  for (let i = items.length - 1; i >= 0; i--) {
    if (items[i].dead) items.splice(i,1);
  }

  drawFarmer();

  if (life <= 0) endGame();

  document.getElementById("life").innerText = life;
  document.getElementById("energy").innerText = energy;
  document.getElementById("score").innerText = score;
  document.getElementById("level").innerText = level;

  requestAnimationFrame(update);
}

function endGame() {
  gameOver = true;
  ctx.fillStyle = "#f87171";
  ctx.font = "28px Arial";
  ctx.fillText("GAME OVER", 90, 260);
}

setInterval(() => {
  if (!gameOver) spawnItem();
}, 1200);

setInterval(() => {
  energy += 2;
  if (energy > 100) energy = 100;
}, 1000);

update();
</script>

</body>
</html>
